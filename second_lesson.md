# 第二课作业

## 所有权

* 本质上是对内存的控制的优化，结合了 c手动管理内存，其他带 gc高级语言的自动回收，算是半自动回收
* 显示控制 *堆* 内存
  * 栈上内存，消耗量比较少，编译时固定，因此对性能影响下  
* 关键三原则

  ```
  1. 每个值 对应一个 所有者
  2. 值在一个时刻下， 有且只有一个所有者
  3. 当所有者离开作用域，这个值将被丢弃
  ```
* 作用域

  作用域是一个项（item）在程序中有效的范围
  在作用域内有效，离开后自动 drop（free）内存
  一般 {} 就是作用域

* 栈上内存 copy：消耗量少，copy 性能高，没有什么内存瓶颈
* 堆上内存：
  * move：浅 shallow copy+ 自动 drop--适用于复杂类型
  * clone： 深 deep copy --适用于基本类型

## 不可变引用

为了解决：不变更所有权引入 引用 概念--引用没有所有权  

不可变引用 就是 读取数据用的，因此相对安全，不会对内存里的内容做修改
这里 rust 叫 借用


## 可变引用

为了更改 内存里的数据

* &mut s
* 限制1：如果你有一个对该变量的可变引用，你就不能再创建 对该变量的引用。这些尝试创建两个 s 的可变引用的代码会失败
  解决：使用大括号创建一个新的作用域
* 限制 2：我们 也 不能在拥有不可变引用的同时拥有可变引用。
  在读取的时候，不要改--限制--数据安全

## 引用规则 总结：

在任意给定时间，

* 要么 只能有一个可变引用，
* 要么 只能有多个不可变引用。
* 引用必须总是有效的。
